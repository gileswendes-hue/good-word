<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>GOOD WORD / BAD WORD</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
<style>
body{font-family:'Inter',sans-serif;overscroll-behavior-y:none;overflow-x:hidden;width:100%}
.card{backdrop-filter:blur(10px);background-color:rgba(255,255,255,0.95);box-shadow:0 15px 40px rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.05);transition:transform .2s ease-out,box-shadow .2s ease-out;position:relative;z-index:10;touch-action:pan-y}
.good-button{background:linear-gradient(145deg,#10b981,#059669)}
.bad-button{background:linear-gradient(145deg,#ef4444,#dc2626)}
.not-word-button{background:linear-gradient(145deg,#64748b,#475569)}
button{transition:transform .1s ease,box-shadow .1s ease}
button:active{transform:scale(0.98);box-shadow:0 4px 10px rgba(0,0,0,0.2)}
.version-indicator{position:fixed;bottom:5px;left:50%;transform:translateX(-50%);font-size:.75rem;color:#9ca3af;z-index:50}
@media(max-width:640px){.rank-item{font-size:.8rem}.vote-counts{font-size:.875rem}}
.animate-fly-left{animation:fly-out-left .6s ease-out forwards}
.animate-fly-right{animation:fly-out-right .6s ease-out forwards}
@keyframes fly-out-left{0%{transform:translate(0,0) rotate(0deg);opacity:1}100%{transform:translate(-150vw,0) rotate(-25deg);opacity:0}}
@keyframes fly-out-right{0%{transform:translate(0,0) rotate(0deg);opacity:1}100%{transform:translate(150vw,0) rotate(25deg);opacity:0}}
.word-reset{transition:transform .3s cubic-bezier(.175,.885,.32,1.275),color .2s,opacity .2s!important}
.color-fade{transition:color .1s ease-out!important}
.word-fade-llama{transition:opacity 8s ease-out,transform 8s ease-out;opacity:0!important;transform:scale(0.9)!important}
.word-fade-quick{transition:opacity .3s ease-out,transform .3s ease-out;opacity:0!important;transform:scale(0.95)!important}
#wordDisplay{font-size:6rem;white-space:nowrap;overflow:hidden;max-width:100%;box-sizing:border-box;position:relative;z-index:20;touch-action:none;user-select:none;will-change:transform,opacity,color}
body.theme-default{background:linear-gradient(135deg,#fef2be 0%,#b5def0 100%)!important}
.theme-default #gameCard{backdrop-filter:blur(10px);background-color:rgba(255,255,255,0.95);box-shadow:0 15px 40px rgba(0,0,0,0.15);border:1px solid rgba(0,0,0,0.05)}
@keyframes rainbow-text{0%{-webkit-filter:hue-rotate(0deg);filter:hue-rotate(0deg)}100%{-webkit-filter:hue-rotate(360deg);filter:hue-rotate(360deg)}}
body.theme-rainbow{background:#f7f7f7!important}
.theme-rainbow .thin-rainbow-frame{position:relative;background:0 0;border:none;box-shadow:0 10px 25px rgba(0,0,0,0.15);border-radius:1.5rem;z-index:10;overflow:hidden;padding:3px!important}
.theme-rainbow .thin-rainbow-frame::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:conic-gradient(#f00,#ff7f00,#ff0,#0f0,#0ff,#00f,#8b00ff,#f00);animation:spin-border 4s linear infinite;z-index:0}
.theme-rainbow .thin-rainbow-frame::after{content:'';position:absolute;inset:3px;background:#fff;border-radius:1.3rem;z-index:1}
.theme-rainbow .thin-rainbow-frame>*{position:relative;z-index:5}
@keyframes spin-border{100%{transform:rotate(360deg)}}
.theme-rainbow #gameCard,.theme-rainbow .ranking-card{padding:2.5rem!important}
.theme-rainbow #wordFrame{padding:0;background-color:transparent;margin-bottom:1.5rem}
.theme-rainbow #wordDisplay{background:linear-gradient(45deg,#f00,#ff7f00,#ff0,#0f0,#0ff,#00f,#9400d3);-webkit-background-clip:text;-webkit-text-fill-color:transparent;color:transparent!important;animation:rainbow-text 5s ease infinite;margin-bottom:0!important;padding:0 .5rem;line-height:1}
body.theme-dark{background:#121212!important}
.theme-dark .card,.theme-dark .ranking-card,.theme-dark #gameCard{background-color:rgba(18,18,18,0.95)!important;box-shadow:0 15px 40px rgba(0,0,0,0.5)!important;border:none!important}
.theme-dark #gameCard{padding:2rem!important}
.theme-dark header .bg-white{background-color:#374151!important;color:#d1d5db}
.theme-dark header .bg-gray-50{background-color:#121212!important}
.theme-dark #wordDisplay,.theme-dark .text-gray-900,.theme-dark .rank-item .text-gray-800{color:#f3f4f6!important}
.theme-dark .text-gray-500,.theme-dark .text-gray-600,.theme-dark .text-gray-800{color:#9ca3af!important}
.theme-dark .border-b{border-color:#4b5563!important}
body.theme-banana{background:#f8f4b2!important}
.theme-banana #wordDisplay{color:#ffd200;animation:bounce-word .5s ease-out infinite alternate}
@keyframes bounce-word{from{transform:translateY(0)}to{transform:translateY(-15px)}}
.theme-banana #gameCard{background-color:rgba(255,255,255,0.95)!important;border:2px solid #f4ef81!important;box-shadow:0 15px 40px rgba(0,0,0,0.15)!important;padding:2rem!important}
body.theme-winter{background:linear-gradient(135deg,#e0f7fa 0%,#b3e5fc 100%)!important}
.theme-winter #wordDisplay{color:transparent;background-image:linear-gradient(to top,#fff 50%,#01579b 50%);background-size:100% 220%;background-position:0 100%;-webkit-background-clip:text;background-clip:text;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.3))}
.animate-snow-text{animation:snow-pile-text 20s linear forwards!important}
@keyframes snow-pile-text{0%{background-position:0 100%}100%{background-position:0 0%}}
.theme-winter #gameCard{background-color:rgba(255,255,255,0.9)!important;border:2px solid #81d4fa!important;box-shadow:0 15px 40px rgba(179,229,252,0.5)!important;padding:2rem!important;position:relative;overflow:hidden}
#card-snow-drift{position:absolute;bottom:0;left:0;right:0;height:0;background:linear-gradient(to top,#fff,rgba(255,255,255,0.8));box-shadow:0 -5px 15px rgba(200,235,255,0.9);border-radius:40% 40% 0 0/30px 30px 0 0;pointer-events:none;z-index:25;opacity:0}
.animate-snow-drift{animation:snow-drift-rise 20s linear forwards!important}
@keyframes snow-drift-rise{0%{height:0;opacity:.5}100%{height:300px;opacity:1}}
.theme-winter #snow-effect{position:fixed;inset:0;width:100vw;height:100%;overflow:hidden;z-index:40;pointer-events:none}
.snow-particle{position:absolute;top:-20px;border-radius:50%;background:#fff;pointer-events:none;animation:snow-fall linear infinite}
@keyframes snow-fall{0%{transform:translate(0,0);opacity:0}10%{opacity:1}100%{transform:translate(var(--sway),110vh);opacity:0}}
body.theme-summer{background:linear-gradient(to bottom,#4facfe 0%,#00f2fe 100%)!important}
.theme-summer #summer-effect{position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:1;overflow:hidden}
.summer-grass{position:absolute;bottom:0;left:0;width:100%;height:15vh;background:linear-gradient(to top,#43a047,#66bb6a);border-radius:50% 50% 0 0/20px 20px 0 0;box-shadow:0 -5px 15px rgba(0,0,0,0.1);z-index:10}
.summer-cloud{position:absolute;background:#fff;border-radius:50px;opacity:.85;animation:cloud-float linear infinite}
.summer-cloud::after,.summer-cloud::before{content:'';position:absolute;background:#fff;z-index:-1;border-radius:50%}
.summer-cloud.v1::after{width:50%;height:140%;top:-60%;left:10%}.summer-cloud.v1::before{width:60%;height:160%;top:-80%;right:10%}
.summer-cloud.v2::after{width:40%;height:120%;top:-50%;left:15%}.summer-cloud.v2::before{width:40%;height:120%;top:-50%;right:15%}
.summer-cloud.v3::after{width:70%;height:180%;top:-100%;left:15%}.summer-cloud.v3::before{width:30%;height:80%;top:-20%;right:5%}
@keyframes cloud-float{0%{transform:translateX(120vw)}100%{transform:translateX(-50vw)}}
.theme-summer #wordDisplay{overflow:visible!important;color:#fffde7;text-shadow:0 0 5px #fff9c4,0 0 20px #ffeb3b,0 0 40px #ff9800,0 0 60px #ff5722;animation:sun-pulse 4s ease-in-out infinite alternate}
@keyframes sun-pulse{from{opacity:.9;text-shadow:0 0 5px #fff9c4,0 0 20px #ffeb3b,0 0 40px #ff9800,0 0 60px #ff5722}to{opacity:1;transform:scale(1.02);text-shadow:0 0 10px #fff9c4,0 0 30px #ffeb3b,0 0 60px #ff9800,0 0 80px #ff5722}}
.theme-summer #gameCard{background-color:rgba(255,255,255,0.85)!important;border:2px solid #fff!important;box-shadow:0 15px 40px rgba(0,100,255,0.2)!important;padding:2rem!important}
body.theme-halloween{background:linear-gradient(135deg,#000 0%,#3a0000 100%)!important}
.theme-halloween #wordDisplay{color:#FF8C00!important;text-shadow:2px 2px 0 #1a0000,0 0 8px #ff8c00,0 0 15px rgba(255,69,0,0.6)!important}
.theme-halloween .card,.theme-halloween .ranking-card{background-color:rgba(10,0,0,0.9)!important;border:2px solid #FF8C00!important;box-shadow:0 0 30px rgba(255,140,0,0.3),0 15px 40px rgba(0,0,0,0.7)!important}
.theme-halloween #gameCard{padding:2rem!important}
.theme-halloween .text-gray-900,.theme-halloween .rank-item .text-gray-800{color:#F3F4F6!important}
.theme-halloween .text-gray-500,.theme-halloween .text-gray-600{color:#9CA3AF!important}
.theme-halloween header .bg-white{background-color:#3A015E!important;color:#d1d5db}
.theme-halloween header .bg-gray-50{background-color:#1C1C1C!important}
.theme-halloween h2{color:#FF8C00!important}
.theme-halloween .border-b{border-color:#691C00!important}
#spider-wrap { position: fixed; top: -200px; z-index: 60; pointer-events: none; }
#spider-anchor { display: flex; flex-direction: column; align-items: center; transform-origin: top center; animation: spider-sway 3s ease-in-out infinite alternate; }
#spider-thread { width: 2px; background: rgba(255,255,255,0.5); height: 0; transition: height 20s ease-in-out; box-shadow: 0 0 2px rgba(255,255,255,0.8); z-index: 1; }
#spider-body { font-size: 3rem; cursor: pointer; pointer-events: auto; line-height: 1; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5)); position: relative; z-index: 2; margin-top: -10px; animation: spider-wiggle 2s ease-in-out infinite; }
#spider-bubble { position: absolute; top: -40px; right: -50px; background: white; color: black; padding: 5px 12px; border-radius: 15px; font-size: 1rem; font-weight: bold; opacity: 0; transition: opacity 0.3s; pointer-events: none; white-space: nowrap; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
#spider-bubble::after { content: ''; position: absolute; bottom: 0; left: 10px; width: 0; height: 0; border: 8px solid transparent; border-top-color: white; border-bottom: 0; margin-bottom: -8px; }
@keyframes spider-sway { 0% { transform: rotate(-8deg); } 100% { transform: rotate(8deg); } }
@keyframes spider-wiggle { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(3deg); } 75% { transform: rotate(-3deg); } }
@keyframes bobbing-word{0%,100%{transform:translateY(0) rotate(-1deg)}50%{transform:translateY(-8px) rotate(1deg)}}
body.theme-submarine{background:linear-gradient(135deg,#020c1e 0%,#0a1931 50%,#183a5a 100%)!important}
.theme-submarine #wordDisplay{color:#b0e0e6!important;text-shadow:0 0 10px rgba(176,224,230,0.7),0 0 5px rgba(255,255,255,0.3)!important;animation:bobbing-word 2.5s ease-in-out infinite}
.theme-submarine .card,.theme-submarine .ranking-card{background-color:rgba(10,25,49,0.9)!important;border:2px solid #1c4a7a!important;box-shadow:0 0 20px rgba(28,74,122,0.5),0 15px 40px rgba(0,0,0,0.7)!important}
.theme-submarine #gameCard{padding:2rem!important}
.theme-submarine .text-gray-900,.theme-submarine .rank-item .text-gray-800{color:#F3F4F6!important}
.theme-submarine .text-gray-500,.theme-submarine .text-gray-600{color:#9CA3AF!important}
.theme-submarine header .bg-white{background-color:#0a1931!important;color:#d1d5db}
.theme-submarine header .bg-gray-50{background-color:#020c1e!important}
.theme-submarine h2{color:#b0e0e6!important}
.theme-submarine .border-b{border-color:#1c4a7a!important}
.theme-submarine #bubble-effect{position:fixed;inset:0;width:100vw;height:100%;overflow:hidden;z-index:40;pointer-events:none}
.bubble-particle{position:absolute;bottom:-50px;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.15),rgba(255,255,255,0.05) 60%,rgba(255,255,255,0));box-shadow:inset 0 0 6px rgba(255,255,255,0.3),0 0 4px rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.15);opacity:0;z-index:0;animation:bubble-rise-float linear infinite}
@keyframes bubble-rise-float{0%{transform:translateY(0) translateX(0) scale(0.8);opacity:0}10%{opacity:1}50%{transform:translateY(-50vh) translateX(15px) scale(1)}100%{transform:translateY(-120vh) translateX(-15px) scale(1.1);opacity:0}}
body.theme-fire{background-color:#150500!important}
.theme-fire #gameCard,.theme-fire .ranking-card{background-color:rgba(30,10,0,0.95)!important;border:2px solid #ff5000!important;box-shadow:0 0 30px rgba(255,80,0,0.3),0 15px 40px rgba(0,0,0,0.7)!important;padding:2.5rem!important}
.theme-fire #wordDisplay{color:#ffaa00!important;text-shadow:2px 2px 0 #300,0 0 8px #ff5000,0 0 20px #f00!important;position:relative;z-index:20}
.theme-fire .text-gray-900,.theme-fire .rank-item .text-gray-800{color:#ffdcd0!important}
.theme-fire .text-gray-500,.theme-fire .text-gray-600{color:#a66!important}
.theme-fire h2{color:#ff5000!important}
.theme-fire header .bg-white{background-color:#3d0a0a!important;color:#ffb3b3}
.theme-fire header .bg-gray-50{background-color:#2b0505!important}
.theme-fire .border-b{border-color:#801010!important}
.theme-fire #fire-effect{position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:5;overflow:hidden}
.fire-particle{position:absolute;bottom:-10px;border-radius:50%;mix-blend-mode:screen;background:radial-gradient(circle,rgba(255,250,200,1) 0%,rgba(255,100,0,0.8) 40%,rgba(255,0,0,0) 70%);filter:blur(4px);animation:fire-rise linear infinite}
@keyframes fire-rise {0%{transform:translateX(0) scale(1);opacity:1;bottom:-10px}25%{transform:translateX(var(--sway)) scale(0.8);opacity:.9}50%{transform:translateX(calc(var(--sway) * -1)) scale(0.6);opacity:.7}100%{transform:translateX(0) scale(0.1);opacity:0;bottom:60vh}}
.smoke-particle{position:absolute;bottom:-50px;left:50%;width:100px;height:100px;background:radial-gradient(circle,rgba(80,80,80,0.6) 0%,rgba(0,0,0,0) 60%);border-radius:40%;filter:blur(8px);animation:smoke-rise 4s linear infinite;pointer-events:none;z-index:4}
@keyframes smoke-rise{0%{transform:translate(-50%,0) scale(1);opacity:0}20%{opacity:.5}100%{transform:translate(var(--sway),-80vh) scale(3);opacity:0}}
/* PLYMOUTH THEME */
body.theme-plymouth { background: linear-gradient(to bottom, #0a192f 0%, #1c3a5e 50%, #d97b45 90%, #000000 100%) !important; }
.theme-plymouth #gameCard, .theme-plymouth .ranking-card { background-color: rgba(15, 23, 42, 0.9) !important; border: 1px solid rgba(255,255,255,0.1) !important; box-shadow: 0 0 30px rgba(0,0,0,0.8) !important; }
.theme-plymouth #wordDisplay { color: #fdba74 !important; text-shadow: 0 0 15px rgba(253, 186, 116, 0.6); }
.theme-plymouth .text-gray-900 { color: #e2e8f0 !important; }
.theme-plymouth .text-gray-500 { color: #94a3b8 !important; }
.theme-plymouth .text-green-700 { color: #4ade80 !important; }
.theme-plymouth .text-red-700 { color: #f87171 !important; }
.theme-plymouth .text-gray-800 { color: #cbd5e1 !important; }
.theme-plymouth #plymouth-effect { position: fixed; inset: 0; width: 100vw; height: 100%; overflow: hidden; z-index: 1; pointer-events: none; }
.star-particle { position: absolute; background: white; border-radius: 50%; animation: twinkle linear infinite; }
@keyframes twinkle { 0%,100% { opacity: 0.3; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.2); box-shadow: 0 0 4px white; } }
/* BALL PIT THEME */
body.theme-ballpit { background: linear-gradient(135deg, #4ade80 0%, #60a5fa 100%) !important; }
.theme-ballpit #gameCard, .theme-ballpit .ranking-card { background-color: rgba(255,255,255,0.85) !important; border: 3px solid #facc15 !important; box-shadow: 0 10px 0 rgba(0,0,0,0.1) !important; }
.theme-ballpit #wordDisplay { color: #dc2626 !important; text-shadow: 2px 2px 0px #facc15; }
.theme-ballpit #ballpit-effect { position: fixed; inset: 0; width: 100%; height: 100%; z-index: 5; overflow: hidden; touch-action: none; }
.ball-particle { position: absolute; border-radius: 50%; box-shadow: inset -5px -5px 10px rgba(0,0,0,0.3), 2px 2px 5px rgba(0,0,0,0.2); cursor: grab; touch-action: none; display:flex; justify-content:center; align-items:center; font-size: 2rem; user-select: none; }
.ball-particle:active { cursor: grabbing; }
/* THOUGHT BUBBLE - TOP LAYER */
.thought-bubble { position: fixed; left: 0; top: 0; background: white; padding: 10px 15px; border-radius: 20px; border: 2px solid #ccc; color: #333; font-size: 0.85rem; font-weight: bold; pointer-events: none; z-index: 9999; max-width: 200px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); opacity: 0; transition: opacity 0.3s; transform: translate(-50%, -100%); }
.thought-bubble .dot-1 { position: absolute; bottom: -8px; left: 50%; margin-left: -5px; width: 10px; height: 10px; background: white; border-radius: 50%; border: 1px solid #ccc; }
.thought-bubble .dot-2 { position: absolute; bottom: -16px; left: 50%; margin-left: 5px; width: 6px; height: 6px; background: white; border-radius: 50%; border: 1px solid #ccc; }
@keyframes wiggle-spin { 0%, 100% { transform: rotate(-5deg) scale(0.95); } 50% { transform: rotate(5deg) scale(1.05); } }
.ball-content { display: block; animation: wiggle-spin 2s ease-in-out infinite; pointer-events: none; }
.interactable-ball { cursor: pointer !important; }
#wordDisplay.override-theme-color{color:var(--dynamic-swipe-color)!important;-webkit-text-fill-color:var(--dynamic-swipe-color)!important;background:0 0!important;text-shadow:none!important;filter:none!important}
</style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 pb-16 theme-default">
<div id="snow-effect" class="hidden"></div><div id="bubble-effect" class="hidden"></div><div id="fire-effect" class="hidden"></div><div id="summer-effect" class="hidden"></div><div id="plymouth-effect" class="hidden"></div><div id="ballpit-effect" class="hidden"></div>
<header class="text-center mb-8 w-full max-w-lg z-20 relative">
    <div id="logoArea" class="h-32 w-full flex items-center justify-center mb-4 relative">
        <div id="leftBadgeContainer" class="absolute left-0 top-1/2 transform -translate-y-1/2 grid grid-cols-2 gap-1 pl-4">
            <div id="cakeBadge" class="p-2 cursor-pointer text-3xl hidden transition duration-300 hover:scale-110" title="The cake is a lie!">üéÇ</div>
            <div id="llamaBadge" class="p-2 cursor-pointer text-3xl hidden transition duration-300 hover:scale-110" title="The Llama has vanished!">ü¶ô</div>
            <div id="potatoBadge" class="p-2 cursor-pointer text-3xl hidden transition duration-300 hover:scale-110" title="Potatoes gonna potate.">ü•î</div>
            <div id="squirrelBadge" class="p-2 cursor-pointer text-3xl hidden transition duration-300 hover:scale-110" title="SQUIGGLE!">üêøÔ∏è</div>
        </div>
        <img src="logo.png" alt="Good Word / Bad Word Logo" class="h-full w-auto max-w-full transform translate-x-4">
        <div id="rightBadgeContainer" class="absolute right-0 top-1/2 transform -translate-y-1/2 flex flex-col items-end space-y-1 pr-4">
            <div id="contributorBadge" class="p-2 cursor-pointer text-3xl hidden transition duration-300 hover:scale-110"></div>
            <div id="awardBadge" class="p-2 cursor-pointer text-3xl transition duration-300 hover:scale-110"></div>
        </div>
    </div>
    <div class="mt-4 flex justify-around p-3 rounded-t-xl bg-white shadow-md vote-counts">
        <div id="goodTotal" class="text-lg font-bold text-green-600">Good Votes: 0</div>
        <div id="badTotal" class="text-lg font-bold text-red-600">Bad Votes: 0</div>
    </div>
    <div class="flex justify-center p-2 rounded-b-xl bg-gray-50 shadow-md">
        <div id="wordCount" class="text-sm font-semibold text-gray-500">Words: 0</div>
    </div>
</header>
<main id="gameCard" class="card p-8 w-full max-w-sm flex flex-col items-center rounded-2xl relative z-10">
    <div id="wordFrame" class="w-full text-center rounded-xl mb-8 relative">
        <div id="wordDisplay" class="font-extrabold text-gray-900 text-center min-h-[72px]">Loading...</div>
    </div>
    <div id="card-snow-drift"></div>
    <div class="flex space-x-4 w-full mb-3 relative z-20">
        <button id="goodButton" class="good-button flex-1 py-4 text-white text-lg font-bold rounded-xl shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-green-500/50" disabled>Good Word</button>
        <button id="badButton" class="bad-button flex-1 py-4 text-white text-lg font-bold rounded-xl shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-red-500/50" disabled>Bad Word</button>
    </div>
    <button id="notWordButton" class="not-word-button w-full py-3 text-white text-lg font-bold rounded-xl shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-slate-500/50 relative z-20" disabled>Not a word!</button>
    <button id="customWordButton" class="mt-4 text-sm text-gray-600 hover:text-gray-900 transition duration-150 relative z-20">Submit Custom Word</button>
</main>
<div id="postVoteMessage" class="mt-4 w-full max-w-sm text-center text-sm font-medium text-gray-600 min-h-[1.5rem] transition-opacity duration-500 opacity-0 relative z-10"></div>
<section class="mt-8 w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10">
    <div class="ranking-card card p-6 rounded-xl">
        <h2 class="text-xl font-bold text-green-700 mb-4 border-b pb-2">Top Good Words</h2>
        <div class="ranking-frame rounded-xl"><div id="goodRankings" class="space-y-2"><p class="text-gray-500">No data yet.</p></div></div>
    </div>
    <div class="ranking-card card p-6 rounded-xl">
        <h2 class="text-xl font-bold text-red-700 mb-4 border-b pb-2">Top Bad Words</h2>
        <div class="ranking-frame rounded-xl"><div id="badRankings" class="space-y-2"><p class="text-gray-500">No data yet.</p></div></div>
    </div>
</section>
<div class="mt-6 w-full max-w-4xl text-center relative z-10">
    <button id="showTop100Button" class="px-6 py-2 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition duration-150">Show Top 100 Rankings</button>
    <button id="compareWordsButton" class="mt-4 px-6 py-2 bg-purple-600 text-white font-bold rounded-lg shadow-md hover:bg-purple-700 transition duration-150">Compare Any Two Words</button>
</div>
<div class="mt-6 p-4 bg-white/70 rounded-xl w-full max-w-sm flex flex-col items-center shadow-lg border border-gray-100 relative z-10">
    <h3 class="text-lg font-bold text-gray-700 mb-2">Unlocked Themes üé®</h3>
    <select id="themeChooser" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 font-semibold"><option value="default">Default</option></select>
    <p id="themeUnlockHint" class="text-xs text-gray-500 mt-2">Vote on special words to unlock new themes!</p>
    <div class="mt-4 flex space-x-2 w-full">
        <button id="showSettingsButton" class="flex-1 px-3 py-2 bg-slate-200 text-gray-700 font-bold rounded-lg shadow-md hover:bg-slate-300 transition duration-150 text-xs">‚öôÔ∏è Settings</button>
        <a href="mailto:gileswendes@gmail.com" class="flex-1 flex items-center justify-center px-3 py-2 bg-indigo-100 text-indigo-700 font-bold rounded-lg shadow-md hover:bg-indigo-200 transition duration-150 text-xs">‚úâÔ∏è Contact</a>
    </div>
</div>
<div id="submissionModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center p-4 z-50">
    <div class="bg-white p-6 rounded-xl w-full max-w-md shadow-2xl">
        <h2 class="text-2xl font-bold mb-4">Submit a New Word</h2>
        <input type="text" id="newWordInput" placeholder="Enter your word here..." class="w-full p-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-indigo-500">
        <div id="modalMessage" class="text-sm text-red-500 mb-4"></div>
        <div class="flex justify-end space-x-3">
            <button id="cancelSubmitButton" class="px-4 py-2 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300">Cancel</button>
            <button id="submitWordButton" class="px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700">Submit Word</button>
        </div>
    </div>
</div>
<div id="fullRankingsModalContainer" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center p-4 z-50">
    <div class="bg-white p-6 rounded-xl w-full max-w-6xl max-h-[90vh] shadow-2xl flex flex-col">
        <div class="flex flex-col md:flex-row justify-between items-center mb-4 border-b pb-2">
            <h2 class="text-2xl font-bold mb-2 md:mb-0">Word Rankings</h2>
            <div class="flex gap-2 w-full md:w-auto">
                <input type="text" id="rankSearchInput" placeholder="Find rank for word..." class="border border-gray-300 rounded-lg px-3 py-1.5 focus:ring-2 focus:ring-indigo-500 flex-grow">
                <button id="rankSearchBtn" class="bg-indigo-600 text-white px-4 py-1.5 rounded-lg hover:bg-indigo-700 font-bold">Search</button>
                <button id="closeFullRankingsModal" class="text-gray-500 hover:text-gray-800 text-2xl font-bold leading-none ml-2">&times;</button>
            </div>
        </div>
        <div class="flex-grow overflow-y-auto">
            <div id="rankSearchContainer" class="hidden bg-blue-50 border-2 border-blue-200 p-4 rounded-xl mb-4 text-center">
                <div id="rankSearchResult"></div>
                <button id="clearRankSearch" class="mt-2 text-sm text-blue-600 underline">Back to Top 100</button>
            </div>
            <div id="rankingListsContainer" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-green-50/50 p-4 rounded-lg shadow-inner flex flex-col"><h3 class="text-xl font-semibold mb-4 text-green-700">Top 100 Good Words</h3><div id="fullGoodRankings" class="space-y-1"></div></div>
                <div class="bg-red-50/50 p-4 rounded-lg shadow-inner flex flex-col"><h3 class="text-xl font-semibold mb-4 text-red-700">Top 100 Bad Words</h3><div id="fullBadRankings" class="space-y-1"></div></div>
            </div>
        </div>
    </div>
</div>
<div id="definitionModalContainer" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center p-4 z-50">
    <div class="bg-white p-6 rounded-xl w-full max-w-lg shadow-2xl flex flex-col max-h-[80vh]">
        <div class="flex justify-between items-center mb-4 border-b pb-2">
            <h2 id="definitionWord" class="text-2xl font-bold">DEFINITION</h2>
            <button id="closeDefinitionModal" class="text-gray-500 hover:text-gray-800 text-2xl font-bold leading-none">&times;</button>
        </div>
        <div id="definitionResults" class="space-y-4 overflow-y-auto"><p>Loading definition...</p></div>
    </div>
</div>
<div id="compareModalContainer" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center p-4 z-50">
    <div class="bg-white p-6 rounded-xl w-full max-w-2xl shadow-2xl">
        <div class="flex justify-between items-center mb-4 border-b pb-2">
            <h2 class="text-2xl font-bold">Compare Any Two Words</h2>
            <button id="closeCompareModal" class="text-gray-500 hover:text-gray-800 text-2xl font-bold leading-none">&times;</button>
        </div>
        <div class="space-y-4">
            <div class="flex flex-col md:flex-row gap-3">
                <input type="text" id="wordOneInput" placeholder="First word..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                <input type="text" id="wordTwoInput" placeholder="Second word..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
            </div>
            <div id="compareResults" class="p-3 bg-gray-50 rounded-lg min-h-[50px] flex flex-col items-center justify-center text-gray-500">Type two words above to see who wins!</div>
        </div>
        <div class="flex justify-end space-x-3 mt-4">
            <button id="runComparisonButton" class="px-4 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 transition">Compare</button>
        </div>
    </div>
</div>
<div id="settingsModalContainer" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center p-4 z-50">
    <div class="bg-white p-6 rounded-xl w-full max-w-md shadow-2xl">
        <div class="flex justify-between items-center mb-4 border-b pb-2">
            <h2 class="text-2xl font-bold">User Settings</h2>
            <button id="closeSettingsModal" class="text-gray-500 hover:text-gray-800 text-2xl font-bold leading-none">&times;</button>
        </div>
        <div class="space-y-4">
            <div class="flex items-center justify-between"><label for="togglePercentages" class="text-lg font-medium text-gray-700">Show Vote Percentages</label><input type="checkbox" id="togglePercentages" class="h-6 w-6 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"></div>
            <div class="flex items-center justify-between"><label for="toggleTips" class="text-lg font-medium text-gray-700">Show Tips & Hints</label><input type="checkbox" id="toggleTips" class="h-6 w-6 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"></div>
        </div>
        <div class="mt-6 border-t pt-4">
            <p class="text-sm text-gray-500">Clear all local data? Irreversible.</p>
            <button id="clearAllDataButton" class="mt-3 px-4 py-2 w-full bg-red-500 text-white font-medium rounded-lg shadow-md hover:bg-red-600 transition">Clear All Local Data</button>
        </div>
    </div>
</div>
<div class="version-indicator"></div>
<script>
const CONFIG={API_BASE_URL:'/api/words',APP_VERSION:'5.3.3',SPECIAL:{CAKE:{text:'CAKE',prob:.005,fade:300,msg:"The cake is a lie!",dur:3e3},LLAMA:{text:'LLAMA',prob:.005,fade:8e3,msg:"what llama?",dur:2e3},POTATO:{text:'POTATO',prob:.005,fade:300,msg:"Potatoes gonna potate.",dur:2e3},SQUIRREL:{text:'SQUIRREL',prob:.005,fade:300,msg:"SQUIGGLE!",dur:1500}},CONTRIBUTION_THRESHOLD:5,BOOST_FACTOR:2,TIP_COOLDOWN:4,HISTORY_SIZE:300,VOTE:{MASH_LIMIT:5,COOLDOWN_TIERS:[15,30],STREAK_WINDOW:1500,SWIPE_THRESHOLD:100},THEME_SECRETS:{rainbow:'UkFJTkJPV3xHQVl8U1BBUktMRXxDT0xPVVJ8UFJJREV8VU5JQ09STnxQUk9VRHxRVUVFUnxHTElUVEVSfExFU0JJQU58VElOU0VM',dark:'TUlETklHSFR8QkxBQ0t8U0hBREV8R09USHxTSEFET1d8TklOSkF8REFSS3xOSUdIVHxTVEVBTFRI',banana:'QkFOQU5BfEJBTkFOQVN8UExBTlRBSU58WUVMTE9XfFNQTElUfE1vbktFWXxIQU1NT0NL',winter:'U05PV01BTnxTTk9XfElDRXxXSU5URVJ8RlJPWkVOfENISUxMfENPTER8RkxBS0V8QkxJWlpBUkR8SUNJQ0xFfFNMRUlHSHxTTk9XQkFMTHxTQ0FSRnxKQUNLRVR8U0xFREdFfE5PVkVNQkVSfERFQ0VNQkVSfEpBTlVBUll8SklOR0xF',summer:'U1VNTUVSfEhPVHxCRUFDSHxIT0xJREFZfFNVTnxWQUNBVElPTnxTV0lNfFNBTkR8UE9PTHxKVUxZfEFVR1VTVHxKVU5F',halloween:'SEFMTE9XRUVOfEdIT1NUfFBVTVBLSU58U1BJREVSfFNXRUVUU3xDT1NUVU1FfFNQT09LWXxPQ1RPQkVSfFdJVENIfFZBTVBJUkV8Wk9NQklFfEJBVHxNT05TVEVS',submarine:'U1VCTUFSSU5FfFdBVEVSfFdBVkVTfFBMWU1PVVRIfEJSSVhIQU18UElSQVRFfFNFQXxBUVVBVElDfEFRVUF8REVFUHxPQ1RPUFVTfFJVTXxTSElQ',fire:'RklSRXxCVVJOfEhPVHxIRUxMfElORkVSTk98RkxBTUV8Q09BTFN8Q1JBQ0tMRXxUT0FTVHxIRUFU',plymouth:'UExZTU9VVEh8REVWT058SkFOTkVSU3xHSU4=',ballpit:'QkFMTHxQSVR8UExBWXxKVU1QfEJPVU5DRXxDT0xPUnxCQUxMUElUfEJBTExSfENPTE9VUg=='},TIPS:["Tip: Drag the word left for good and right for bad.","Tip: Try comparing words!","Tip: Tap the word for a definition.","Tip: Check the theme chooser.","Tip: Turn off messages in Settings.","Tip: Don't go mistaking your house burning down for the dawn.","Tip: Go outside for a stomp?","Tip: Nobody else has a clue either.","Tip: I've got a floor, so what?","Tip: Wear sunscreen.","Tip: How thick is wall?","Tip: Ask them out for a coffee.","Tip: Can you smell burning toast?","Tip: Time is an illusion. Lunchtime doubly so.","Tip: It is better to keep your mouth closed and let people think you are a fool than to open it and remove all doubt.","Tip: It's the things that are given, not won, are the things that you earned","Tip: I'm so glad that you exist.","Tip: Play with friends! Not this, something classic like Tetris or chess.","Tip: Move into the country, eat a lot of peaches.","Tip: I wish there was a way to know you're in the good old days, before you've actually left them.","Tip: You can see the sea, it's over there between the land and the sky","Tip: Cake or death?"]};
const DOM={header:{logoArea:document.getElementById('logoArea'),goodTotal:document.getElementById('goodTotal'),badTotal:document.getElementById('badTotal'),wordCount:document.getElementById('wordCount'),badges:{cake:document.getElementById('cakeBadge'),llama:document.getElementById('llamaBadge'),potato:document.getElementById('potatoBadge'),squirrel:document.getElementById('squirrelBadge'),award:document.getElementById('awardBadge'),contributor:document.getElementById('contributorBadge')}},game:{card:document.getElementById('gameCard'),wordFrame:document.getElementById('wordFrame'),wordDisplay:document.getElementById('wordDisplay'),buttons:{good:document.getElementById('goodButton'),bad:document.getElementById('badButton'),notWord:document.getElementById('notWordButton'),custom:document.getElementById('customWordButton')},message:document.getElementById('postVoteMessage')},rankings:{good:document.getElementById('goodRankings'),bad:document.getElementById('badRankings'),fullGood:document.getElementById('fullGoodRankings'),fullBad:document.getElementById('fullBadRankings'),btnShow:document.getElementById('showTop100Button'),listsContainer:document.getElementById('rankingListsContainer'),searchContainer:document.getElementById('rankSearchContainer'),searchResult:document.getElementById('rankSearchResult'),clearSearch:document.getElementById('clearRankSearch'),searchInput:document.getElementById('rankSearchInput'),searchBtn:document.getElementById('rankSearchBtn')},theme:{chooser:document.getElementById('themeChooser'),hint:document.getElementById('themeUnlockHint'),effects:{snow:document.getElementById('snow-effect'),bubble:document.getElementById('bubble-effect'),fire:document.getElementById('fire-effect'),summer:document.getElementById('summer-effect'),plymouth:document.getElementById('plymouth-effect'),ballpit:document.getElementById('ballpit-effect')}},modals:{submission:document.getElementById('submissionModal'),fullRankings:document.getElementById('fullRankingsModalContainer'),definition:document.getElementById('definitionModalContainer'),compare:document.getElementById('compareModalContainer'),settings:document.getElementById('settingsModalContainer')},inputs:{newWord:document.getElementById('newWordInput'),wordOne:document.getElementById('wordOneInput'),wordTwo:document.getElementById('wordTwoInput'),modalMsg:document.getElementById('modalMessage'),compareResults:document.getElementById('compareResults'),settings:{tips:document.getElementById('toggleTips'),percentages:document.getElementById('togglePercentages')}},general:{version:document.querySelector('.version-indicator')}};
const State={data:{userId:localStorage.getItem('userId')||crypto.randomUUID(),voteCount:parseInt(localStorage.getItem('voteCount')||0),contributorCount:parseInt(localStorage.getItem('contributorCount')||0),badges:{cake:localStorage.getItem('cakeBadgeUnlocked')==='true',llama:localStorage.getItem('llamaBadgeUnlocked')==='true',potato:localStorage.getItem('potatoBadgeUnlocked')==='true',squirrel:localStorage.getItem('squirrelBadgeUnlocked')==='true'},settings:JSON.parse(localStorage.getItem('userSettings'))||{showTips:!0,showPercentages:!0},currentTheme:localStorage.getItem('currentTheme')||'default',unlockedThemes:JSON.parse(localStorage.getItem('unlockedThemes'))||[],voteCounterForTips:parseInt(localStorage.getItem('voteCounterForTips'))||0,manualTheme:localStorage.getItem('manualTheme')==='true',seenHistory:JSON.parse(localStorage.getItem('seenHistory'))||[]},runtime:{allWords:[],currentWordIndex:0,streak:0,lastVoteTime:0,isCoolingDown:!1,cooldownTimer:null,mashLevel:0},save(k,v){this.data[k]=v;const s=localStorage;if(k==='settings')s.setItem('userSettings',JSON.stringify(v));else if(k==='unlockedThemes')s.setItem('unlockedThemes',JSON.stringify(v));else if(k==='seenHistory')s.setItem('seenHistory',JSON.stringify(v));else if(k.startsWith('badge_'))s.setItem(k,v);else s.setItem(k,v)},unlockBadge(n){this.data.badges[n]=!0;localStorage.setItem(`${n}BadgeUnlocked`,'true')},incrementVote(){this.data.voteCount++;localStorage.setItem('voteCount',this.data.voteCount)},incrementContributor(){this.data.contributorCount++;localStorage.setItem('contributorCount',this.data.contributorCount)},clearAll(){if(confirm("Clear all local data? Irreversible.")){localStorage.clear();window.location.reload()}}};if(!localStorage.getItem('userId'))localStorage.setItem('userId',State.data.userId);
const Physics={balls:[],gx:0,gy:0.8,handleOrientation(e){const x=e.gamma||0,y=e.beta||0;const tx=Math.min(Math.max(x/4,-1),1);const ty=Math.min(Math.max(y/4,-1),1);Physics.gx+=(tx-Physics.gx)*0.1;Physics.gy+=(ty-Physics.gy)*0.1},run(){const W=window.innerWidth,H=window.innerHeight;const cylW=Math.min(W,500),minX=(W-cylW)/2,maxX=minX+cylW;for(let s=0;s<8;s++){Physics.balls.forEach(b=>{if(!b.drag){b.vx+=Physics.gx/8;b.vy+=Physics.gy/8;b.x+=b.vx;b.y+=b.vy;b.vx*=0.92;b.vy*=0.92;if(b.x<minX){b.x=minX;b.vx*=-0.2}if(b.x>maxX-b.r*2){b.x=maxX-b.r*2;b.vx*=-0.2}if(b.y<0){b.y=0;b.vy*=-0.2}if(b.y>H-b.r*2){b.y=H-b.r*2;b.vy*=-0.2}}});for(let i=0;i<Physics.balls.length;i++){for(let j=i+1;j<Physics.balls.length;j++){const b1=Physics.balls[i],b2=Physics.balls[j];const dx=(b2.x+b2.r)-(b1.x+b1.r),dy=(b2.y+b2.r)-(b1.y+b1.r);const dist=Math.sqrt(dx*dx+dy*dy),minDist=b1.r+b2.r+0.5;if(dist<minDist&&dist>0){const angle=Math.atan2(dy,dx),tx=(Math.cos(angle)*(minDist-dist))/2,ty=(Math.sin(angle)*(minDist-dist))/2;b1.x-=tx;b1.y-=ty;b2.x+=tx;b2.y+=ty;if(!b1.drag&&!b2.drag){const nx=dx/dist,ny=dy/dist;const p=2*(b1.vx*nx+b1.vy*ny-b2.vx*nx-b2.vy*ny)/2;b1.vx-=p*nx*0.15;b1.vy-=p*ny*0.15;b2.vx+=p*nx*0.15;b2.vy+=p*ny*0.15}}}}}Physics.balls.forEach(b=>{b.el.style.transform=`translate(${b.x}px,${b.y}px)`;if(b.bubble){b.bubble.style.transform=`translate(${b.x+b.r}px,${b.y-20}px) translate(-50%,-100%)`}});Effects.ballLoop=requestAnimationFrame(Physics.run)}};
const API={async fetchWords(){try{const r=await fetch(CONFIG.API_BASE_URL);if(!r.ok)throw 0;return await r.json()}catch(e){return null}},async vote(id,type){return fetch(`${CONFIG.API_BASE_URL}/${id}/vote`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({voteType:type,userId:State.data.userId})})},async submitWord(text){return fetch(CONFIG.API_BASE_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text})})},async define(w){return fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${w.toLowerCase()}`)}};
const ThemeManager={wordMap:{},init(){Object.entries(CONFIG.THEME_SECRETS).forEach(([k,v])=>{try{atob(v).split('|').forEach(w=>this.wordMap[w]=k)}catch{}});this.populateChooser();this.apply(State.data.currentTheme)},populateChooser(){const u=State.data.unlockedThemes,a=[...new Set(u)].sort(),c=DOM.theme.chooser;c.innerHTML='<option value="default">Default</option>';a.forEach(t=>{const o=document.createElement('option');o.value=t;o.textContent=t==='ballpit'?'Ball Pit':t.charAt(0).toUpperCase()+t.slice(1);c.appendChild(o)});c.value=State.data.currentTheme;DOM.theme.hint.textContent=a.length>0?`You have ${a.length} themes unlocked!`:`Vote on special words to unlock new themes!`},apply(t,m=!1){if(m)State.save('manualTheme',!0);document.body.className=document.body.className.split(' ').filter(c=>!c.startsWith('theme-')).join(' ');document.body.classList.add(`theme-${t}`);State.save('currentTheme',t);const e=DOM.theme.effects;e.snow.classList.toggle('hidden',t!=='winter');e.bubble.classList.toggle('hidden',t!=='submarine');e.fire.classList.toggle('hidden',t!=='fire');e.summer.classList.toggle('hidden',t!=='summer');e.plymouth.classList.toggle('hidden',t!=='plymouth');e.ballpit.classList.toggle('hidden',t!=='ballpit');if(t==='winter')Effects.snow();else e.snow.innerHTML='';if(t==='submarine')Effects.bubbles();else e.bubble.innerHTML='';if(t==='fire')Effects.fire();else e.fire.innerHTML='';if(t==='summer')Effects.summer();else e.summer.innerHTML='';if(t==='plymouth')Effects.plymouth(!0);else{e.plymouth.innerHTML='';Effects.plymouth(!1)}if(t==='ballpit')Effects.ballpit(!0);else Effects.ballpit(!1);Effects.halloween(t==='halloween');const cards=document.querySelectorAll('.card, .ranking-card'),isR=t==='rainbow';[DOM.game.card,...cards].forEach(el=>{if(!el)return;if(isR){el.classList.add('thin-rainbow-frame');el.classList.remove('card')}else{el.classList.remove('thin-rainbow-frame');el.classList.add('card')}});const d=document.getElementById('card-snow-drift');d.style.display=t!=='winter'?'none':'block';if(State.runtime.allWords.length>0)UIManager.displayWord(State.runtime.allWords[State.runtime.currentWordIndex])},checkUnlock(w){const t=this.wordMap[w];if(t&&!State.data.unlockedThemes.includes(t)){State.data.unlockedThemes.push(t);State.save('unlockedThemes',State.data.unlockedThemes);this.populateChooser();if(!State.data.manualTheme)this.apply(t);return!0}return!1}};
const Effects={spiderTimeout:null,webRaf:null,ballLoop:null,plymouth(a){const c=DOM.theme.effects.plymouth;if(!a){c.innerHTML='';return}c.innerHTML='';for(let i=0;i<100;i++){const s=document.createElement('div');s.className='star-particle';const z=Math.random()*2+1;s.style.width=s.style.height=`${z}px`;s.style.left=`${Math.random()*100}vw`;s.style.top=`${Math.random()*60}vh`;s.style.animationDuration=`${Math.random()*3+1}s`;s.style.animationDelay=`${Math.random()*2}s`;c.appendChild(s)}},fire(){const c=DOM.theme.effects.fire;c.innerHTML='';for(let i=0;i<80;i++){const p=document.createElement('div');p.className='fire-particle';p.style.animationDuration=`${Math.random()*1.5+0.5}s`;p.style.animationDelay=`${Math.random()}s`;p.style.left=`calc(10% + (80% * ${Math.random()}))`;const size=Math.random()*3+2;p.style.width=p.style.height=`${size}em`;p.style.setProperty('--sway',`${(Math.random()-.5)*20}px`);c.appendChild(p)}for(let i=0;i<15;i++){const s=document.createElement('div');s.className='smoke-particle';s.style.animationDelay=`${Math.random()*3}s`;s.style.left=`${Math.random()*90+5}%`;s.style.setProperty('--sway',`${(Math.random()-.5)*150}px`);c.appendChild(s)}},bubbles(){const c=DOM.theme.effects.bubble;c.innerHTML='';const cl=[10,30,70,90];for(let i=0;i<40;i++){const p=document.createElement('div');p.className='bubble-particle';const s=Math.random()*30+10;p.style.width=p.style.height=`${s}px`;p.style.left=`${cl[Math.floor(Math.random()*cl.length)]+(Math.random()-.5)*20}%`;p.style.animationDuration=`${Math.random()*10+10}s`;p.style.animationDelay=`-${Math.random()*15}s`;c.appendChild(p)}},snow(){const c=DOM.theme.effects.snow;c.innerHTML='';for(let i=0;i<60;i++){const f=document.createElement('div');f.className='snow-particle';const s=Math.random()*12+5;f.style.width=f.style.height=`${s}px`;f.style.opacity=Math.random()*.6+.3;if(s<4)f.style.filter=`blur(${Math.random()*2}px)`;f.style.left=`${Math.random()*100}vw`;f.style.setProperty('--sway',`${(Math.random()-.5)*100}px`);f.style.animationDuration=`${Math.random()*15+8}s`;f.style.animationDelay=`-${Math.random()*15}s`;c.appendChild(f)}},summer(){const c=DOM.theme.effects.summer;c.innerHTML='';const g=document.createElement('div');g.className='summer-grass';c.appendChild(g);for(let i=0;i<8;i++){const d=document.createElement('div');d.className=`summer-cloud v${Math.floor(Math.random()*3)+1}`;const w=Math.random()*100+100;d.style.width=`${w}px`;d.style.height=`${w*.35}px`;d.style.top=`${Math.random()*60}%`;d.style.animationDuration=`${Math.random()*60+60}s`;d.style.animationDelay=`-${Math.random()*100}s`;c.appendChild(d)}},halloween(active){if(this.spiderTimeout)clearTimeout(this.spiderTimeout);if(this.webRaf)cancelAnimationFrame(this.webRaf);if(!active){const old=document.getElementById('spider-wrap');if(old)old.remove();const oldWeb=document.getElementById('spider-web-corner');if(oldWeb)oldWeb.remove();return}if(!document.getElementById('spider-wrap')){const wrap=document.createElement('div');wrap.id='spider-wrap';wrap.style.left=(Math.random()*80+10)+'%';const scale=(Math.random()*.6+.6).toFixed(2);wrap.innerHTML=`<div id="spider-anchor" style="transform: scale(${scale})"><div id="spider-thread"></div><div id="spider-body">üï∑Ô∏è<div id="spider-bubble"></div></div></div>`;document.body.appendChild(wrap);const thread=wrap.querySelector('#spider-thread'),body=wrap.querySelector('#spider-body'),bub=wrap.querySelector('#spider-bubble');const runDrop=()=>{const phrases=['ouch!','hey frend!',"I wouldn't hurt a fly!","I'm more scared of you...","I'm a web dev!","just hanging"];const txt=phrases[Math.floor(Math.random()*phrases.length)];bub.innerText=txt;const dist=Math.random()*40+20;void thread.offsetWidth;thread.style.height=(dist+20)+'vh';body.onclick=()=>{bub.style.opacity='1';setTimeout(()=>bub.style.opacity='0',2e3)};this.spiderTimeout=setTimeout(()=>{thread.style.height='0';setTimeout(()=>{if(wrap.parentNode)wrap.style.left=(Math.random()*80+10)+'%';this.spiderTimeout=setTimeout(runDrop,Math.random()*15000+10000)},20000)},20000+(Math.random()*3000+5000))};setTimeout(runDrop,Math.random()*5000+2000)}if(!document.getElementById('spider-web-corner')){const web=document.createElement('div');web.id='spider-web-corner';web.innerHTML=`<svg id="web-svg" viewBox="0 0 300 300" style="width:300px;height:300px;position:fixed;top:0;right:0;z-index:55;pointer-events:none;opacity:0.7;filter:drop-shadow(1px 1px 2px rgba(0,0,0,0.5))"></svg>`;document.body.appendChild(web);const svg=document.getElementById('web-svg');const cx=300,cy=0;const baseAnchors=[{x:0,y:0},{x:60,y:100},{x:140,y:200},{x:220,y:270},{x:300,y:300}];const animateWeb=()=>{const time=Date.now();let pathStr='';const curAnchors=baseAnchors.map((a,i)=>{if(i===0||i===baseAnchors.length-1)return a;const sway=Math.sin((time/2000)+i)*5;return{x:a.x+sway,y:a.y+sway}});curAnchors.forEach(p=>{pathStr+=`<line x1="${cx}" y1="${cy}" x2="${p.x}" y2="${p.y}" stroke="rgba(255,255,255,0.4)" stroke-width="2.5"/>`});const levels=7;for(let i=1;i<=levels;i++){const t=i/levels;let d='';for(let j=0;j<curAnchors.length;j++){const ax=cx+(curAnchors[j].x-cx)*t,ay=cy+(curAnchors[j].y-cy)*t;if(j===0)d+=`M ${ax} ${ay}`;else{const px=cx+(curAnchors[j-1].x-cx)*t,py=cy+(curAnchors[j-1].y-cy)*t;const midX=(px+ax)/2,midY=(py+ay)/2,sag=15*t*(1-t*0.5),dx=midX-cx,dy=midY-cy,len=Math.sqrt(dx*dx+dy*dy),nx=dx/len,ny=dy/len,qx=midX-nx*sag,qy=midY-ny*sag;d+=` Q ${qx} ${qy} ${ax} ${ay}`}}pathStr+=`<path d="${d}" stroke="rgba(255,255,255,0.3)" stroke-width="2.5" fill="none"/>`}svg.innerHTML=pathStr;this.webRaf=requestAnimationFrame(animateWeb)};animateWeb()}},ballpit(active){const c=DOM.theme.effects.ballpit;if(this.ballLoop)cancelAnimationFrame(this.ballLoop);if(!active){c.innerHTML='';window.removeEventListener('deviceorientation',Physics.handleOrientation);return}window.addEventListener('deviceorientation',Physics.handleOrientation);c.innerHTML='';Physics.balls=[];const colors=['#ef4444','#3b82f6','#eab308','#22c55e','#a855f7'];const rareItems=['üí©','üêß','ü¶Ç','üçÑ','üíâ','üíé'];const r=30;const W=window.innerWidth,H=window.innerHeight;const cylW=Math.min(W,500);const minX=(W-cylW)/2,maxX=minX+cylW-r*2;const showThought=(ballObj,cont)=>{const b=document.createElement('div');b.className='thought-bubble';b.innerHTML=cont||"Because we're grown-ups now, and it's our turn to decide what that means.";b.innerHTML+='<div class="dot-1"></div><div class="dot-2"></div>';document.body.appendChild(b);ballObj.bubble=b;requestAnimationFrame(()=>b.style.opacity='1');setTimeout(()=>{b.style.opacity='0';setTimeout(()=>{b.remove();ballObj.bubble=null},300)},4000)};const addBall=(type)=>{const el=document.createElement('div');el.className='ball-particle';el.style.width=el.style.height=`${r*2}px`;let content='';if(type==='germ'){content='ü¶†';el.title="Click me!";el.classList.add('interactable-ball');el.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)]}else if(type==='rare'){content=rareItems[Math.floor(Math.random()*rareItems.length)];el.classList.add('interactable-ball');el.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)]}else{el.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)]}if(content)el.innerHTML=`<span class="ball-content">${content}</span>`;c.appendChild(el);const b={el,x:minX+Math.random()*(maxX-minX),y:Math.random()*(H/2),vx:(Math.random()-0.5)*10,vy:(Math.random()-0.5)*10,r,drag:!1,lastX:0,lastY:0,bubble:null,type,content};Physics.balls.push(b);let sx=0,sy=0;el.onmousedown=el.ontouchstart=(e)=>{b.drag=!0;b.vx=b.vy=0;const p=e.touches?e.touches[0]:e;b.lastX=p.clientX;b.lastY=p.clientY;sx=p.clientX;sy=p.clientY;e.preventDefault()};el.onmouseup=el.ontouchend=(e)=>{b.drag=!1;const p=e.changedTouches?e.changedTouches[0]:e;if((type==='germ'||type==='rare')&&Math.abs(p.clientX-sx)<50&&Math.abs(p.clientY-sy)<50){showThought(b,type==='rare'?`<span style="font-size:2em">${content}</span>`:null)}}};for(let i=0;i<80;i++)addBall(Math.random()<0.005?'rare':'normal');for(let i=0;i<5;i++)addBall('germ');window.onmouseup=window.ontouchend=()=>{Physics.balls.forEach(b=>b.drag=!1)};window.onmousemove=window.ontouchmove=(e)=>{const p=e.touches?e.touches[0]:e;Physics.balls.forEach(b=>{if(b.drag){b.vx=(p.clientX-b.lastX)*0.5;b.vy=(p.clientY-b.lastY)*0.5;b.x=p.clientX-b.r;b.y=p.clientY-b.r;b.lastX=p.clientX;b.lastY=p.clientY}})};Physics.run()}};
const ModalManager={toggle(id,show){const e=DOM.modals[id];e.classList.toggle('hidden',!show);e.classList.toggle('flex',show)},init(){document.getElementById('showSettingsButton').onclick=()=>{DOM.inputs.settings.tips.checked=State.data.settings.showTips;DOM.inputs.settings.percentages.checked=State.data.settings.showPercentages;this.toggle('settings',!0)};document.getElementById('closeSettingsModal').onclick=()=>this.toggle('settings',!1);DOM.inputs.settings.tips.onchange=e=>State.save('settings',{...State.data.settings,showTips:e.target.checked});DOM.inputs.settings.percentages.onchange=e=>State.save('settings',{...State.data.settings,showPercentages:e.target.checked});DOM.game.buttons.custom.onclick=()=>{DOM.inputs.newWord.value='';DOM.inputs.modalMsg.textContent='';this.toggle('submission',!0)};document.getElementById('cancelSubmitButton').onclick=()=>this.toggle('submission',!1);DOM.rankings.btnShow.onclick=()=>{UIManager.renderFullRankings();this.toggle('fullRankings',!0)};document.getElementById('closeFullRankingsModal').onclick=()=>this.toggle('fullRankings',!1);document.getElementById('compareWordsButton').onclick=()=>{DOM.inputs.wordOne.value='';DOM.inputs.wordTwo.value='';DOM.inputs.compareResults.innerHTML='Type words above to see who wins!';this.toggle('compare',!0)};document.getElementById('closeCompareModal').onclick=()=>this.toggle('compare',!1);DOM.game.wordDisplay.onclick=()=>Game.showDefinition();document.getElementById('closeDefinitionModal').onclick=()=>this.toggle('definition',!1);DOM.rankings.searchBtn.onclick=()=>UIManager.handleRankSearch();DOM.rankings.clearSearch.onclick=()=>{DOM.rankings.searchInput.value='';DOM.rankings.searchContainer.classList.add('hidden');DOM.rankings.listsContainer.classList.remove('hidden')};Object.keys(DOM.modals).forEach(k=>{DOM.modals[k].addEventListener('click',e=>{if(e.target===DOM.modals[k])this.toggle(k,!1)})})}};
const UIManager={msgTimeout:null,showMessage(t,err=!1){const wd=DOM.game.wordDisplay;wd.textContent=t;wd.className=`text-4xl font-bold text-center min-h-[72px] ${err?'text-red-500':'text-gray-500'}`;wd.style.fontSize='1.0rem';wd.style.cursor='default';DOM.game.wordFrame.style.padding='0';this.disableButtons(!0)},disableButtons(d){Object.values(DOM.game.buttons).forEach(b=>{if(!b.id.includes('custom'))b.disabled=d})},showPostVoteMessage(m){const el=DOM.game.message;if(this.msgTimeout)clearTimeout(this.msgTimeout);el.classList.remove('opacity-100');el.classList.add('opacity-0');setTimeout(()=>{el.innerHTML=m;el.classList.remove('opacity-0');el.classList.add('opacity-100');this.msgTimeout=setTimeout(()=>{el.classList.remove('opacity-100');el.classList.add('opacity-0')},5e3)},150)},updateStats(){const w=State.runtime.allWords;if(!w.length)return;const g=w.reduce((s,x)=>s+(x.goodVotes||0),0),b=w.reduce((s,x)=>s+(x.badVotes||0),0);DOM.header.goodTotal.textContent=`Good Votes: ${g.toLocaleString()}`;DOM.header.badTotal.textContent=`Bad Votes: ${b.toLocaleString()}`;DOM.header.wordCount.textContent=`Words in Database: ${w.length}`;if(State.data.contributorCount>=CONFIG.CONTRIBUTION_THRESHOLD){DOM.header.badges.contributor.textContent='‚úçÔ∏è';DOM.header.badges.contributor.classList.remove('hidden')}let star='üò∂',title='Next Award: Bronze (5 Votes)';const v=State.data.voteCount;if(v>=250){star='üèÜ';title='Platinum Star!'}else if(v>=50){star='üåü';title='Gold Star!'}else if(v>=25){star='ü•à';title='Silver Star!'}else if(v>=5){star='ü•â';title='Bronze Star!'}DOM.header.badges.award.textContent=star;DOM.header.badges.award.title=title;const db=State.data.badges;DOM.header.badges.cake.classList.toggle('hidden',!db.cake);DOM.header.badges.llama.classList.toggle('hidden',!db.llama);DOM.header.badges.potato.classList.toggle('hidden',!db.potato);DOM.header.badges.squirrel.classList.toggle('hidden',!db.squirrel);this.renderMiniRankings()},displayWord(w){if(!w){this.showMessage("No words available!");return}const wd=DOM.game.wordDisplay,txt=w.text.toUpperCase();wd.textContent=txt;wd.className='font-extrabold text-gray-900 text-center min-h-[72px]';wd.style='';wd.style.opacity='1';const t=State.data.currentTheme;if(['dark','halloween','submarine','fire','plymouth'].includes(t))wd.style.color='#f3f4f6';if(t==='halloween'){wd.style.color='#FF8C00';wd.style.textShadow='2px 2px 0px #1a0000, 0 0 8px rgba(255,140,0,1), 0 0 15px rgba(255,69,0,0.6)'}if(t==='submarine'){wd.style.color='#b0e0e6';wd.style.textShadow='0 0 10px rgba(176,224,230,0.7), 0 0 5px rgba(255,255,255,0.3)';wd.style.animation='bobbing-word 2.5s ease-in-out infinite'}if(t==='fire'){wd.style.color='#ffaa00';wd.style.textShadow='2px 2px 0px #300, 0 0 8px #ff5000, 0 0 20px #ff0000'}if(t==='banana'){wd.style.color='#ffd200';wd.style.animation='bounce-word .5s ease-out infinite alternate'}if(t==='winter'){wd.style.color='#01579b';wd.classList.remove('animate-snow-text');void wd.offsetWidth;wd.classList.add('animate-snow-text')}if(t==='summer'){wd.style.color='#fffde7';wd.style.textShadow='0 0 5px #fff9c4, 0 0 20px #ffeb3b, 0 0 40px #ff9800, 0 0 70px #ff5722';wd.style.animation='sun-pulse 4s ease-in-out infinite alternate'}else{if(!['banana','rainbow','submarine'].includes(t))wd.style.animation='none'}if(t==='rainbow'){wd.style.background='linear-gradient(45deg, #f00, #ff7f00, #ff0, #0f0, #0ff, #00f, #9400d3)';wd.style.webkitBackgroundClip='text';wd.style.webkitTextFillColor='transparent';wd.style.color='transparent';wd.style.animation='rainbow-text 5s ease infinite'}const drift=document.getElementById('card-snow-drift');if(t==='winter'){drift.classList.remove('animate-snow-drift');void drift.offsetWidth;drift.classList.add('animate-snow-drift')}else{drift.style.height='0';}this.fitText(txt);if(!State.runtime.isCoolingDown)this.disableButtons(!1);wd.style.cursor='grab'},fitText(t){const wd=DOM.game.wordDisplay,cW=DOM.game.card.clientWidth-parseFloat(getComputedStyle(DOM.game.card).paddingLeft)*2;wd.style.fontSize='96px';wd.style.whiteSpace='nowrap';if(wd.scrollWidth>cW){const s=cW/wd.scrollWidth;wd.style.fontSize=Math.max(24,Math.floor(96*s))+'px'}wd.style.whiteSpace='normal'},renderRankingsImpl(c,l,type,isF){c.innerHTML='';if(!l.length){c.innerHTML=`<p class="text-gray-500">No data yet.</p>`;return}l.forEach((w,i)=>{const d=document.createElement('div');d.className=`flex justify-between items-center py-1 ${isF?'full-ranking-item text-sm':'rank-item'}`;const bg=type==='good'?'bg-green-500':'bg-red-500',val=type==='good'?w.score:Math.abs(w.score);d.innerHTML=`<div class="flex items-center ${isF?'space-x-3':'space-x-2'}"><span class="font-bold ${isF?'text-base w-8':'text-lg w-5'} text-center text-gray-500 flex-shrink-0">${w.rank||(i+1)}.</span><span class="font-medium text-gray-800">${w.text.toUpperCase()}</span></div><div class="flex items-center space-x-3"><span class="text-xs text-white ${bg} px-2 rounded-full font-bold">${val}</span><span class="text-sm text-gray-600">(${w.good} / ${w.bad})</span></div>`;c.appendChild(d)})},getRankedLists(lim){const r=State.runtime.allWords.map(w=>({text:w.text,good:w.goodVotes||0,bad:w.badVotes||0,score:(w.goodVotes||0)-(w.badVotes||0)}));const tg=[...r].sort((a,b)=>(b.score-a.score)||((b.good+b.bad)-(a.good+a.bad)));const tb=[...r].sort((a,b)=>(a.score-b.score)||((b.good+b.bad)-(a.good+a.bad)));if(lim===0) return {topGood:tg, topBad:tb};return{topGood:tg.slice(0,lim),topBad:tb.slice(0,lim)}},renderMiniRankings(){const{topGood,topBad}=this.getRankedLists(5);this.renderRankingsImpl(DOM.rankings.good,topGood,'good',!1);this.renderRankingsImpl(DOM.rankings.bad,topBad,'bad',!1)},renderFullRankings(){const{topGood,topBad}=this.getRankedLists(100);this.renderRankingsImpl(DOM.rankings.fullGood,topGood,'good',!0);this.renderRankingsImpl(DOM.rankings.fullBad,topBad,'bad',!0)},handleRankSearch(){const q=DOM.rankings.searchInput.value.trim().toUpperCase();if(!q)return;const{topGood,topBad}=this.getRankedLists(0);const gI=topGood.findIndex(w=>w.text.toUpperCase()===q);const bI=topBad.findIndex(w=>w.text.toUpperCase()===q);DOM.rankings.listsContainer.classList.add('hidden');DOM.rankings.searchContainer.classList.remove('hidden');const c=DOM.rankings.searchResult;if(gI===-1){c.innerHTML=`<p class="text-xl text-gray-700 font-bold">Word not found: ${q}</p>`;return}const w=topGood[gI];c.innerHTML=`<div class="p-4 bg-white rounded-xl shadow-sm border border-gray-200 inline-block w-full max-w-sm"><h3 class="text-2xl font-black text-gray-800 mb-4">${w.text.toUpperCase()}</h3><div class="flex justify-around mb-4"><div class="text-center"><div class="text-sm text-gray-500">Good Rank</div><div class="text-3xl font-bold text-green-600">#${gI+1}</div></div><div class="text-center"><div class="text-sm text-gray-500">Bad Rank</div><div class="text-3xl font-bold text-red-600">#${bI+1}</div></div></div><div class="border-t pt-4 flex justify-between text-sm"><span class="font-bold text-green-600">+${w.good} Good</span><span class="font-bold text-red-600">-${w.bad} Bad</span></div></div>`}};
const Game={cleanStyles(e){e.style.animation='none';e.style.background='none';e.style.webkitTextFillColor='initial';e.style.textShadow='none';e.style.transform='none';e.style.filter='none';e.style.color=''},async init(){DOM.general.version.textContent=`v${CONFIG.APP_VERSION} | Made by Gilxs in 12,025`;DOM.game.buttons.good.onclick=()=>this.vote('good');DOM.game.buttons.bad.onclick=()=>this.vote('bad');DOM.game.buttons.notWord.onclick=()=>this.vote('notWord');const b=DOM.header.badges;b.cake.onclick=()=>this.loadSpecial(CONFIG.SPECIAL.CAKE.text);b.llama.onclick=()=>this.loadSpecial(CONFIG.SPECIAL.LLAMA.text);b.potato.onclick=()=>this.loadSpecial(CONFIG.SPECIAL.POTATO.text);b.squirrel.onclick=()=>this.loadSpecial(CONFIG.SPECIAL.SQUIRREL.text);b.award.onclick=()=>UIManager.showPostVoteMessage(`üèÜ Total Votes Cast: ${State.data.voteCount}`);b.contributor.onclick=()=>UIManager.showPostVoteMessage(`‚úçÔ∏è You Submitted: ${State.data.contributorCount}`);document.getElementById('submitWordButton').onclick=async()=>{const t=DOM.inputs.newWord.value.trim();if(!t||t.includes(' ')||t.length>45){DOM.inputs.modalMsg.textContent="Invalid word.";return}const btn=document.getElementById('submitWordButton');btn.disabled=!0;try{const r=await API.submitWord(t);if(r.status===201){State.incrementContributor();DOM.inputs.modalMsg.textContent="Success! Your new word has been added!";setTimeout(()=>{ModalManager.toggle('submission',!1);this.refreshData()},1e3)}else{const d=await r.json();DOM.inputs.modalMsg.textContent=d.message||"Error"}}catch(e){DOM.inputs.modalMsg.textContent="Network Error"}btn.disabled=!1};document.getElementById('runComparisonButton').onclick=async()=>{const w1=DOM.inputs.wordOne.value.trim(),w2=DOM.inputs.wordTwo.value.trim();if(!w1&&!w2){DOM.inputs.compareResults.innerHTML='<span class="text-red-500">Please enter at least one word.</span>';return}DOM.inputs.compareResults.innerHTML='<span class="text-gray-500 animate-pulse">Analyzing words...</span>';const gd=async w=>{if(w.includes(' ')||w.length>45)return{t:w,valid:!1,err:'Invalid word.'};const e=State.runtime.allWords.find(x=>x.text.toUpperCase()===w.toUpperCase());if(e)return{t:e.text,valid:!0,exists:!0,d:e};const r=await API.submitWord(w);if(r.status===201){State.incrementContributor();return{t:w.toUpperCase(),valid:!0,exists:!1,isNew:!0}}return{t:w,valid:!1,err:'Could not fetch data.'}};const res=[];if(w1)res.push(await gd(w1));if(w2)res.push(await gd(w2));if(res.some(r=>r.isNew))this.refreshData(!1);if(res.some(r=>!r.valid)){DOM.inputs.compareResults.innerHTML=res.map(r=>!r.valid?`<p class="text-red-500 mb-2"><strong>${r.t}</strong>: ${r.err}</p>`:'').join('');return}const st=res.map(r=>{if(r.isNew)return{text:r.t.toUpperCase(),score:0,good:0,bad:0,total:0,approval:0,isNew:!0};const g=r.d.goodVotes||0,b=r.d.badVotes||0,t=g+b;return{text:r.t.toUpperCase(),score:g-b,good:g,bad:b,total:t,approval:t>0?Math.round((g/t)*100):0,isNew:!1}});let h='';if(st.length===2){const[s1,s2]=st;let wi=-1;if(s1.score!==s2.score)wi=s1.score>s2.score?0:1;h=`<div class="flex flex-col md:flex-row gap-4 w-full justify-center items-stretch">`;st.forEach((s,i)=>{const iw=i===wi,il=wi!==-1&&!iw,bc=iw?'border-yellow-400 bg-yellow-50 shadow-xl scale-105 z-10':'border-gray-200 bg-white',oc=il?'opacity-70 grayscale-[0.3]':'';h+=`<div class="flex-1 p-4 rounded-xl border-2 ${bc} ${oc} flex flex-col items-center transition-all duration-300">${iw?'<div class="text-2xl mb-2">üèÜ</div>':'<div class="h-8 mb-2"></div>'}<h3 class="text-xl font-black text-gray-800 mb-1">${s.text}</h3>${iw?'<span class="bg-yellow-400 text-white text-[10px] font-bold px-2 py-0.5 rounded-full mb-2">WINNER</span>':''}${s.isNew?'<span class="bg-purple-100 text-purple-600 text-xs px-2 py-1 rounded mb-2">New!</span>':''}<div class="text-3xl font-bold ${s.score>=0?'text-green-600':'text-red-600'} mb-4">${s.score}</div><div class="w-full space-y-2"><div class="flex justify-between text-xs text-gray-500"><span>Approval</span><span>${s.approval}%</span></div><div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-blue-500 h-2.5 rounded-full" style="width: ${s.approval}%"></div></div><div class="flex justify-between text-xs pt-1"><span class="text-green-600 font-bold">+${s.good}</span><span class="text-red-600 font-bold">-${s.bad}</span></div></div></div>`;if(i===0)h+=`<div class="flex items-center justify-center font-black text-gray-300 md:px-2">VS</div>`});h+='</div>'}else{const s=st[0];h=`<div class="p-4 rounded-xl border border-gray-200 bg-white flex flex-col items-center w-full max-w-xs mx-auto"><h3 class="text-xl font-black text-gray-800 mb-2">${s.text}</h3>${s.isNew?'<span class="bg-purple-100 text-purple-600 text-xs px-2 py-1 rounded mb-2">Newly Added!</span>':''}<div class="text-4xl font-bold ${s.score>=0?'text-green-600':'text-red-600'} mb-4">${s.score}</div><div class="w-full space-y-2"><div class="flex justify-between text-xs text-gray-500"><span>Approval Rating</span><span>${s.approval}%</span></div><div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-blue-500 h-2.5 rounded-full" style="width: ${s.approval}%"></div></div><div class="flex justify-between text-xs pt-1"><span class="text-green-600 font-bold">+${s.good} Votes</span><span class="text-red-600 font-bold">-${s.bad} Votes</span></div></div></div>`}DOM.inputs.compareResults.innerHTML=h};DOM.theme.chooser.onchange=e=>ThemeManager.apply(e.target.value,!0);document.getElementById('clearAllDataButton').onclick=State.clearAll;InputHandler.init();ThemeManager.init();ModalManager.init();await this.refreshData()},async refreshData(u=!0){if(u)UIManager.showMessage("Loading...");const d=await API.fetchWords();if(d){State.runtime.allWords=d.filter(w=>(w.notWordVotes||0)<3);UIManager.updateStats();if(u)this.nextWord()}else UIManager.showMessage("Connection Error",!0)},nextWord(){const p=State.runtime.allWords;if(!p.length)return;const r=Math.random(),{CAKE,LLAMA,POTATO,SQUIRREL}=CONFIG.SPECIAL,b=State.data.badges;let sp=null;if(!b.cake&&r<CAKE.prob)sp=CAKE.text;else if(!b.llama&&r<CAKE.prob+LLAMA.prob)sp=LLAMA.text;else if(!b.potato&&r<CAKE.prob+LLAMA.prob+POTATO.prob)sp=POTATO.text;else if(!b.squirrel&&r<CAKE.prob+LLAMA.prob+POTATO.prob+SQUIRREL.prob)sp=SQUIRREL.text;if(sp){const i=p.findIndex(w=>w.text.toUpperCase()===sp);if(i!==-1&&i!==State.runtime.currentWordIndex){State.runtime.currentWordIndex=i;UIManager.displayWord(p[i]);return}}let av=p.reduce((acc,w,i)=>{if(!State.data.seenHistory.includes(i)&&i!==State.runtime.currentWordIndex)acc.push({i,v:(w.goodVotes||0)+(w.badVotes||0)});return acc},[]);if(!av.length)av=p.map((w,i)=>({i,v:(w.goodVotes||0)+(w.badVotes||0)})).filter(x=>x.i!==State.runtime.currentWordIndex);let tw=0;av=av.map(c=>{let w=1.0/(c.v+1);if(p[c.i].text.toUpperCase()===CAKE.text)w*=CONFIG.BOOST_FACTOR;tw+=w;return{i:c.i,w}});let rnd=Math.random()*tw,sel=av[av.length-1].i;for(let it of av){rnd-=it.w;if(rnd<=0){sel=it.i;break}}State.runtime.currentWordIndex=sel;State.data.seenHistory.push(sel);if(State.data.seenHistory.length>CONFIG.HISTORY_SIZE)State.data.seenHistory.shift();State.save('seenHistory',State.data.seenHistory);UIManager.displayWord(p[sel])},loadSpecial(t){const i=State.runtime.allWords.findIndex(w=>w.text.toUpperCase()===t);if(i!==-1){State.runtime.currentWordIndex=i;UIManager.displayWord(State.runtime.allWords[i])}},async showDefinition(){const w=State.runtime.allWords[State.runtime.currentWordIndex];if(!w)return;ModalManager.toggle('definition',!0);document.getElementById('definitionWord').textContent=w.text.toUpperCase();const d=document.getElementById('definitionResults');d.innerHTML='Loading...';try{const r=await API.define(w.text);if(!r.ok)throw 0;const j=await r.json();let h='';j[0].meanings.forEach(m=>{h+=`<div class="mb-4"><h4 class="text-lg font-bold italic text-indigo-600">${m.partOfSpeech}</h4><ol class="list-decimal list-inside pl-4 mt-2 space-y-1">`;m.definitions.forEach(def=>{h+=`<li>${def.definition}</li>`;if(def.example)h+=`<p class="text-sm text-gray-500 pl-4 italic">"${def.example}"</p>`});h+='</ol></div>'});d.innerHTML=h}catch{d.innerHTML='<p class="text-red-500">Definition not found.</p>'}},handleCooldown(){State.runtime.isCoolingDown=!0;const t=CONFIG.VOTE.COOLDOWN_TIERS;let r=t[Math.min(State.runtime.mashLevel,t.length-1)];UIManager.showMessage(`Mashing detected. Wait ${r}s...`,!0);State.runtime.cooldownTimer=setInterval(()=>{r--;if(r>0)UIManager.showMessage(`Wait ${r}s...`,!0);else{clearInterval(State.runtime.cooldownTimer);State.runtime.isCoolingDown=!1;State.runtime.streak=0;State.runtime.mashLevel++;UIManager.displayWord(State.runtime.allWords[State.runtime.currentWordIndex])}},1e3)},async vote(t,s=!1){if(State.runtime.isCoolingDown)return;const n=Date.now();if(State.runtime.lastVoteTime>0&&(n-State.runtime.lastVoteTime)>CONFIG.VOTE.STREAK_WINDOW)State.runtime.streak=1;else State.runtime.streak++;State.runtime.lastVoteTime=n;if(State.runtime.streak>CONFIG.VOTE.MASH_LIMIT){this.handleCooldown();return}const w=State.runtime.allWords[State.runtime.currentWordIndex],up=w.text.toUpperCase(),{CAKE,LLAMA,POTATO,SQUIRREL}=CONFIG.SPECIAL;UIManager.disableButtons(!0);const wd=DOM.game.wordDisplay;if(!s&&(t==='good'||t==='bad')){this.cleanStyles(wd);wd.style.setProperty('--dynamic-swipe-color',t==='good'?'#10b981':'#ef4444');wd.classList.add('override-theme-color','color-fade');wd.style.color=t==='good'?'#10b981':'#ef4444';await new Promise(r=>setTimeout(r,50));wd.classList.remove('color-fade');wd.classList.add(t==='good'?'animate-fly-left':'animate-fly-right')}const hSpec=(c,k)=>{State.unlockBadge(k);this.cleanStyles(wd);wd.className='font-extrabold text-gray-900 text-center min-h-[72px]';wd.classList.add(c.text==='LLAMA'?'word-fade-llama':'word-fade-quick');setTimeout(()=>{wd.className='';wd.style.opacity='1';wd.style.transform='none';UIManager.showMessage(c.msg,!1);setTimeout(()=>{this.nextWord();this.refreshData(!1)},c.dur)},c.fade)};if(up===CAKE.text){hSpec(CAKE,'cake');return}if(up===LLAMA.text){hSpec(LLAMA,'llama');return}if(up===POTATO.text){hSpec(POTATO,'potato');return}if(up===SQUIRREL.text){hSpec(SQUIRREL,'squirrel');return}try{const un=ThemeManager.checkUnlock(up),res=await API.vote(w._id,t);if(res.status!==403&&!res.ok)throw 0;w[`${t}Votes`]=(w[`${t}Votes`]||0)+1;State.incrementVote();let m='';if(un)m="üéâ New Theme Unlocked!";else if(State.data.settings.showPercentages&&(t==='good'||t==='bad')){const tot=(w.goodVotes||0)+(w.badVotes||0),p=Math.round((w[`${t}Votes`]/tot)*100);m=`${t==='good'?'Good':'Bad'} vote! ${p}% agree.`}if(State.data.settings.showTips){State.save('voteCounterForTips',State.data.voteCounterForTips+1);if(State.data.voteCounterForTips%CONFIG.TIP_COOLDOWN===0)m=CONFIG.TIPS[Math.floor(Math.random()*CONFIG.TIPS.length)]}UIManager.showPostVoteMessage(m);UIManager.updateStats();setTimeout(()=>{wd.classList.remove('animate-fly-left','animate-fly-right','swipe-good-color','swipe-bad-color','override-theme-color');wd.style.transform='';wd.style.opacity='1';wd.style.color='';this.nextWord();this.refreshData(!1)},(t==='good'||t==='bad')?600:0)}catch(e){UIManager.showMessage("Vote Failed",!0);wd.classList.remove('animate-fly-left','animate-fly-right','swipe-good-color','swipe-bad-color','override-theme-color');UIManager.disableButtons(!1)}}};
const InputHandler={sX:0,sY:0,drag:!1,scroll:!1,raf:null,init(){const c=DOM.game.card,wd=DOM.game.wordDisplay;c.addEventListener('touchstart',e=>{if(State.runtime.isCoolingDown||DOM.game.buttons.good.disabled)return;if(e.target.closest('button, input, select'))return;this.sX=e.touches[0].clientX;this.sY=e.touches[0].clientY;this.drag=!1;this.scroll=!1;wd.style.transition='none';wd.style.animation='none'},{passive:!1});c.addEventListener('touchmove',e=>{if(State.runtime.isCoolingDown||DOM.game.buttons.good.disabled)return;const x=e.touches[0].clientX,y=e.touches[0].clientY,dX=x-this.sX,dY=y-this.sY;if(!this.drag&&!this.scroll){if(Math.abs(dY)>Math.abs(dX)){this.scroll=!0;return}this.drag=!0;Game.cleanStyles(wd);wd.style.background='none';wd.style.webkitTextFillColor='initial'}if(this.scroll)return;if(this.drag){e.preventDefault();if(this.raf)cancelAnimationFrame(this.raf);this.raf=requestAnimationFrame(()=>{wd.style.transform=`translate(${dX}px, ${dY*.8}px) rotate(${dX*.05}deg)`;const col=`rgba(${dX<0?'16, 185, 129':'239, 68, 68'}, ${Math.min(Math.abs(dX)/150,1)})`;wd.style.setProperty('--dynamic-swipe-color',col);wd.classList.add('override-theme-color')})}},{passive:!1});c.addEventListener('touchend',e=>{if(!this.drag)return;const dX=e.changedTouches[0].clientX-this.sX;wd.classList.remove('override-theme-color');if(this.raf)cancelAnimationFrame(this.raf);if(Math.abs(dX)>CONFIG.VOTE.SWIPE_THRESHOLD){const l=dX<0;wd.style.transition='transform .4s ease-out, opacity .4s ease-out';wd.style.transform=`translate(${l?-window.innerWidth:window.innerWidth}px, 0px) rotate(${l?-20:20}deg)`;wd.style.opacity='0';wd.style.color=l?'#10b981':'#ef4444';Game.vote(l?'good':'bad',!0)}else{wd.classList.add('word-reset');wd.style.transform='translate(0,0) rotate(0)';wd.style.color='';setTimeout(()=>{wd.classList.remove('word-reset');UIManager.displayWord(State.runtime.allWords[State.runtime.currentWordIndex])},300)}this.drag=!1;this.scroll=!1},!1)}};window.onload=Game.init.bind(Game);
</script>
</body>
</html>
